import Foundation
import shared

class LoginViewModel: ObservableObject {
  @Published var isLoggedIn = false
  @Published var username = ""
  @Published var password = ""
  @Published var rememberMe = true
  
  private let userLogin = UserLoginUseCase.init()
  
  func login() {
     userLogin.invokeNative(username: self.username, 
                           password: self.password, 
                           rememberMe: self.rememberMe) { result in
            DispatchQueue.main.async {
                self.isLoggedIn = result.boolValue
                 
                if self.isLoggedIn {
                    self.userAccountInfo()
                }
            }
     } onError: { error in
        print(error.getStackTrace())
     }
  }

  //....
}